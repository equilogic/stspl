<?xml version="1.0" encoding="utf-8"?>
<openerp>
	<data>
		<!-- Template for Header and Footer -->
		<template id="external_layout_stspl_sales_report_template">
			<!-- Multicompany -->
			<t t-if="o and 'company_id' in o">
				<t t-set="company" t-value="o.company_id"></t>
			</t>
			<t t-if="not o or not 'company_id' in o">
				<t t-set="company" t-value="res_company"></t>
			</t>

			<t t-raw="0" />
			<t t-call="stspl_sales.external_layout_footer_stspl_sales_report_template" />
		</template>

		<!-- Footer for Sales Report -->
		<template id="external_layout_footer_stspl_sales_report_template">
			<div class="footer">
				<div class="col-xs-4 pull-right" style="font-size:11.5px">
							<table class="table table-condensed">
								<tr>
									<td>Sub-Total</td>
									<td class="text-right">
										<span t-field="o.amount_untaxed" />
									</td>
								</tr>
								<tr>
									<!-- <td>Discount</td>
									<td>
										<span />
									</td> -->
								</tr>
								<tr>
									<td>Taxes</td>
									<td class="text-right">
										<span t-field="o.amount_tax" />
									</td>
								</tr>
								<tr>
									<td><b>Total</b></td>
									<td class="text-right">
										<span t-field="o.amount_total" />
									</td>
								</tr>
							</table>
						</div>
									
					<div style="text-align:left;font-size:10px;">
						<u>
							<p>Note:</p>
						</u>
						<p t-if="o.partner_id.comment"><span t-field="o.partner_id.comment"/></p>
	        		</div>


					<table style="border-top:1px solid;font-size:12px;" width="100%">
						<tr>
							<td width="80%">
								<div>
									<span>Please visit our website @ </span>
									<span t-field="o.company_id.website" />
								</div>
								<div>
									<span>email : </span>
									<span t-field="o.company_id.email" />
								</div>
								<br/>
								<div>
									<span>This is a computer generated documents and no signature is
										required
									</span>
								</div>
							</td>
							<td width="20%">
								<br/>
								<ul class="list-inline" style='text-align:right'>
									<li>Page:</li>
									<li>
										<span class="page" />
									</li>
									<li>/</li>
									<li>
										<span class="topage" />
									</li>
								</ul>
							</td>
						</tr>
					</table>
								
			</div>
		</template>

		<template id="report.minimal_layout">
            <t t-raw="'&lt;base href=%s&gt;' % base_url"/>
            &lt;!DOCTYPE html&gt;
                <html style="height: 0;">
                    <head>
                        <link href="/report/static/src/css/reset.min.css" rel="stylesheet"/>
                        <link href="/web/static/lib/bootstrap/css/bootstrap.css" rel="stylesheet"/>
                        <link href="/website/static/src/css/website.css" rel="stylesheet"/>
                        <link href="/web/static/lib/fontawesome/css/font-awesome.css" rel="stylesheet"/>
                        <style type='text/css'><t t-raw="css"/></style>
                        <t t-if="subst is True">
                            		        <script>
                       function subst() {
                           var vars = {};
                           var x = document.location.search.substring(1).split('&amp;');
                           for (var i in x) {
                               var z = x[i].split('=', 2);
                               vars[z[0]] = unescape(z[1]);
                           }
                           var x=['frompage', 'topage', 'page', 'webpage', 'section', 'subsection', 'subsubsection'];
                           for (var i in x) {
                               var y = document.getElementsByClassName(x[i]);
                               for (var j=0; j&lt;y.length; ++j)
                                   y[j].textContent = vars[x[i]];
                           }
                           var operations = {
    							'last-page': function (elt) { elt.style.visibility = (vars.page === vars.topage) ? "visible" : "hidden"; },
							};

                           for (var klass in operations) {
                               var y = document.getElementsByClassName(klass);
                               for (var j=0; j&lt;y.length; ++j)
                               operations[klass](y[j]);
                           }
                      }
                  </script>
                        </t>
                    </head>
                    <body class="container" onload="subst()">
                        <t t-raw="body"/>
                    </body>
                </html>
         </template>

		<!-- Template for Sales Order Report -->
		<template id="sgtpl_sale_report_template">
			<style type="text/css">
				td.line , span.line ,th.line {
				font-family:times new
				roman;
				}
			</style>
			<t t-call="report.html_container">
				<t t-call="stspl_sales.external_layout_stspl_sales_report_template">
					<div class="page">
						<div class="oe_structure" />
						<div class="row">
							<div class="col-xs-3">
								<span t-if="o.company_id and o.company_id.logo">
									<img t-att-src="'data:image/png;base64,%s' % o.company_id.logo"
										style="max-height: 75px;" />
								</span>
							</div>
							<div class="col-xs-8 col-xs-offset-1 text-right">
								<div t-if="o.company_id" style="font-size:12px">
									<div>
										<h5><b><span t-field="o.company_id.name"></span></b></h5>
									</div>
									<div>
										<span t-field="o.company_id.street"/>
										<t t-if="o.company_id.street">,</t>
										<span t-field="o.company_id.city"/>
										<t t-if="o.company_id.city">,</t>
										<span t-field="o.company_id.country_id"/>
										<span t-field="o.company_id.zip"/>
									</div>

									<div>
										<span>Tel :</span>
										<span style="padding:5px"  t-field="o.company_id.phone" />

										<span style="padding:5px" >Fax :</span>
										<span t-field="o.company_id.fax" />
									</div>
									<div>
										<span>CO. REG. NO. </span>
										<span t-field="o.company_id.company_registry" />
									</div>
									<div>
										<span class="text-right">GST REG NO. </span>
										<span t-field="o.company_id.gst_no" />
									</div>
								</div>
							</div>
						</div>
						<br/>
						<div class="row">
							<div class="col-xs-7" style="font-size:12px">
								<h4 t-if="o.state == 'draft'"><b>QUOTATION</b></h4>
								<h4 t-if="o.state != 'draft'"><b>SALES ORDER</b></h4>

								<td width="60%">
									<span>TO:</span>
									<div t-if="o.partner_id ">
										<div>
											<span t-field="o.partner_id"/>
										</div>
										<div>
											<span t-field="o.partner_id.house_no"/>
											,
											<span t-field="o.partner_id.street"/>
										</div>
										<div>
											<span t-field="o.partner_id.level_no"/>
											,
											<span t-field="o.partner_id.street2"/>
										</div>
										<div>
											<span t-field="o.partner_id.city"/>
											,
											<span t-field="o.partner_id.state_id"/>
										</div>
										<div>
											<span t-field="o.partner_id.country_id"/>
											,
											<span t-field="o.partner_id.zip"/>
										</div>
									</div>
									<br/>
									<div>
										<span>ATTN:</span><span style="padding:25px" t-field="o.attn_sales"/><br/>
										<span>C.C:</span><span style="padding:25px" t-field="o.partner_id.website"/><br/>
										<span>TEL:</span><span style="padding:25px" t-field="o.partner_id.phone"/><br/>
									</div>
								</td>
							</div>

							<div class="col-xs-5 text-right">
                   				<div style="font-size:13px">
                   					<span>NO.</span>
                   					<strong><span style="padding:83px" t-esc="get_quat(o.date_order,o.name)"/></strong>
                   				</div>
                   				<div style="font-size:12px">
                   					<span>DATE</span><span style="padding:57px" t-field="o.date_order" t-field-options='{"format": "dd-MM-Y HH:MM:SS"}' />
                   				</div>

                   				<td width="55%">
									<table style="font-size:11px">
										<tr>
											<td style="padding:5px">
												<span>YourRef   </span>
											</td>
											<td style="padding:5px">:</td>
											<td style="padding:5px">
												<span t-field="o.client_order_ref" />
											</td>
										</tr>
										<tr>
											<td style="padding:5px">
												<span>Incoterms  </span>
											</td>
											<td style="padding:5px">:</td>
											<td style="padding:5px">
												<span t-field="o.incoterm.code" />
											</td>
										</tr>
										<tr>
											<td style="padding:5px">
												<span>Payment Term  </span>
											</td>
											<td style="padding:5px">:</td>
											<td style="padding:5px">
												<span t-field="o.payment_term" />
											</td>
										</tr>
										<tr>
											<td style="padding:5px">
												<span>Lead Time</span>
											</td>
											<td style="padding:5px">:</td>
											<td style="padding:5px"></td>
										</tr>
										<tr>
											<td style="padding:5px">
												<span>Sales Person   </span>
											</td>
											<td style="padding:5px">:</td>
											<td style="padding:5px">
												<span t-field="o.user_id.name" />
											</td>
										</tr>
										<tr>
											<td style="padding:5px">
												<span>Validity   </span>
											</td>
											<td style="padding:5px">:</td>
											<td style="padding:5px"></td>
										</tr>
										<tr>
											<td style="padding:5px">
												<span>Currency  </span>
											</td>
											<td style="padding:5px">:</td>
											<td style="padding:5px">
												<span t-field="o.currency_id" />
											</td>
										</tr>
									</table>
								</td>
		                  	</div>
						</div>
						<br />

						<table class="table table-condensed" width="100%" style="border-top:0.5px solid;font-size:11px;">
							<thead>
								<tr>
									<th t-if="o.state == 'draft'" width="12%">Item No</th>
									<th t-if="o.state != 'draft'" width="12%">Serial No.</th>
									<th class="text-center line" width="35%">Description/Part No</th>
									<th t-if="o.state != 'draft'" class="text-left line" width="13%">ETD</th>
									<th class="text-left line" width="10%">Qty</th>
									<th class="text-left line" width="10%">Units</th>
									<th class="text-left line" width="15%">Unit Price</th>
									<th class="text-left line" width="10%">Amount</th>
								</tr>
							</thead>
							<tbody>
								<tr t-foreach="o.order_line" t-as="line">
									<td t-if="o.state == 'draft'" width="12%" class="text-center line">
										<span t-esc="line_index+1" />
									</td>
									<td t-if="o.state != 'draft'" width="12%" class="text-center line">
										<span t-esc="line_index+1" />
									</td>
									<td class="text-left line" width="35%">
										<t t-if="line.product_id">
											<span t-field="line.product_id.name" />
											:
											<span t-field="line.product_id.description" />
										</t>
									</td>
									<td t-if="o.state != 'draft'" class="text-left line" width="12%">
										<t t-if="o.picking_ids and line.product_id">
											<span t-esc="get_etd(o.picking_ids,line.product_id)" />
										</t>
									</td>
									<td class="text-left line" width="5%">
										<span t-esc="get_qty(line.product_uom_qty)" />
									</td>
									<td class="text-left line" width="10%">
										<span t-field="line.product_uom.name" />
									</td>
									<td class="text-left line" width="15%">
										<span t-field="line.price_unit" />
									</td>
									<td class="text-left line" width="10%">
										<span t-field="line.price_subtotal" />
									</td>
								</tr>
							</tbody>
						</table>	
					<br/><br/><br/><br/><br/>
					<br/><br/><br/><br/><br/>
				    <div class="row">
						<!-- <div class="col-xs-4 pull-right" style="font-size:11.5px">
							<table class="table table-condensed">
								<tr>
									<td>Sub-Total</td>
									<td class="text-right">
										<span t-field="o.amount_untaxed" />
									</td>
								</tr>
								<tr>
									<td>Discount</td>
									<td>
										<span />
									</td>
								</tr>
								<tr>
									<td>Taxes</td>
									<td class="text-right">
										<span t-field="o.amount_tax" />
									</td>
								</tr>
								<tr>
									<td><b>Total</b></td>
									<td class="text-right">
										<span t-field="o.amount_total" />
									</td>
								</tr>
							</table>
						</div> -->
					</div>

									
					</div>					
				</t>
			</t>
		</template>

		<template id="report_sale_order">
			<t t-call="report.html_container">
				<t t-foreach="doc_ids" t-as="doc_id">
					<t
						t-raw="translate_doc(doc_id, doc_model, 'partner_id.lang', 'stspl_sales.sgtpl_sale_report_template')" />
				</t>
			</t>
		</template>
	</data>
</openerp>
