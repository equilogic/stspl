<?xml version="1.0" encoding="utf-8"?>
<openerp>
    <data>
    	<!-- Template for Headre and Footer -->
    	<template id="external_layout_stspl_tax_invoice">
    		<!-- Multicompany -->
        <t t-if="o and 'company_id' in o">
            <t t-set="company" t-value="o.company_id"></t>
        </t>
        <t t-if="not o or not 'company_id' in o">
            <t t-set="company" t-value="res_company"></t>
        </t>
    
        <t t-call="stspl_account.external_layout_header_stspl_tax_invoice" />
        <t t-raw="0" />
        <t t-call="stspl_account.external_layout_footer_stspl_tax_invoice" />
    	</template>
    	
    	<!-- Report Header -->
    	<template id="external_layout_header_stspl_tax_invoice">
    		<div class="header">
       		<div class="col-xs-3">
       			<span t-if="o.company_id">
   				   <img t-att-src="'data:image/png;base64,%s' % o.company_id.logo" style="max-height: 65px;"/>
   				 </span>
   			  </div>
       		<div class="col-xs-8 col-xs-offset-1 text-right">
       			<div t-if="o.company_id" style="font-size:12px">
     					<div>
                <h5><b><span t-field="o.company_id.name" ></span></b></h5>
              </div>

     					<div>
                <span t-field="o.company_id.street"/>
                ,
     						<span t-field="o.company_id.city"/>
                ,
     						<span t-field="o.company_id.country_id"/>
                <span t-field="o.company_id.zip"/>
     					</div>
       					
     					<div>
     						<span>Tel :</span>
     						<span t-field="o.company_id.phone"/>
     						
     						<span>Fax :</span>
     						<span t-field="o.company_id.fax"/>
     					</div>
     					<div>
     						<span >CO. REG. NO. </span>
     						<span t-field="o.company_id.company_registry" />
     					</div>
     					<div>
     						<span class="text-right">GST REG NO. </span>
     						<t t-if="o.company_id.gst_no"><span t-field="o.company_id.gst_no"/></t>
     					</div>
       			</div>
       		</div> 
        </div>
    	</template>

    	<!-- Report Footer -->
    	<template id="external_layout_footer_stspl_tax_invoice">
    		<div class="footer">
          <div class="last-page">
            <p style="font-size:11px">PARTIAL DELIVERY</p>
            <br/>
            <t t-if="o.partner_id.country_id.name == 'Singapore'">
                <t t-foreach="get_sgd_details(o,o.currency_id)" t-as="sgd_res">
	                <p style="font-size:11px">For GST Purpose Only <br/>
	                    <span>USD 1.00 = </span><span t-esc="sgd_res['rate']" /><br/>
	                    <span>Amount Before GST = </span><span t-esc="sgd_res['before_gst']" /><br/>
	                    <span>GST Amount = </span><span t-esc="sgd_res['gst_amt']" /><br/>
	                    <span>Amount After GST = </span><span t-esc="sgd_res['after_amt']" /><br/>
	                </p>
                </t>
            </t>
            <div class="row" style="font-size:11px">
              <div class="col-xs-4 pull-right">
                <table class="table table-condensed">
                  <tr>
                    <td>Sub-Total</td>
                    <td class="text-right">
                      <span t-field="o.amount_untaxed" />
                    </td>
                  </tr>
                  <tr>
                  	<t t-if="o.partner_id.country_id">
                  		<t t-if="o.partner_id.country_id.name == 'Singapore'">
                  			<td>GST 7% SR</td>
                  		</t>
                  		<t t-if="o.partner_id.country_id.name != 'Singapore'">
                  			<td>GST 0% ZR</td>
                  		</t>                  		
                  		
                  	</t>
                    <td class="text-right">
                      <span t-field="o.amount_tax" />
                    </td>
                  </tr>
                  <tr>
                    <td><b>Total</b></td>
                    <td class="text-right">
                      <span t-field="o.amount_total" />
                    </td>
                  </tr>
                </table>
              </div>
              <div class="col-xs-6 pull-left">
                <table style="font-size:11px">
                  <div >
                    <span>Ship Via</span><span style="padding:30px" t-field="o.purchase_id.picking_ids.name" />
                  </div>
                  <div>
                    <span>Tracking No.</span><span style="padding:30px" t-field="o.sales_id.picking_ids.name" />
                  </div>
                  <br/>
                  <div>
                    <span>DO No:</span><span style="padding:30px" t-field="o.number" />
                  </div>
                </table>
              </div>
            </div>
          </div>
          <br/>
         	<table style="border-top:0.5px solid;font-size:11px" width="100%">
         		<tr>
         			<td width="80%">
                <div><span>Please visit our website @ </span><span t-field="o.company_id.website" /></div>
          	    <div><span>email : </span><span t-field="o.company_id.email" /></div>
          	    <div><span>This is a computer generated documents and no signature is required</span></div> 
         			</td>

         			<td width="20%">
                <br/>
         				<ul class="list-inline" style='text-align:right'>
                  <li>page:</li>
                  <li><span class="page"/></li>
                  <li>/</li>
                  <li><span class="topage"/></li>
                </ul>
         			</td>
         		</tr>
         	</table>
	      </div>
    	</template>

      <template id="report.minimal_layout">
              <t t-raw="'&lt;base href=%s&gt;' % base_url"/>
              &lt;!DOCTYPE html&gt;
                  <html style="height: 0;">
                      <head>
                          <link href="/report/static/src/css/reset.min.css" rel="stylesheet"/>
                          <link href="/web/static/lib/bootstrap/css/bootstrap.css" rel="stylesheet"/>
                          <link href="/website/static/src/css/website.css" rel="stylesheet"/>
                          <link href="/web/static/lib/fontawesome/css/font-awesome.css" rel="stylesheet"/>
                          <style type='text/css'><t t-raw="css"/></style>
                          <t t-if="subst is True">
                                          <script>
                         function subst() {
                             var vars = {};
                             var x = document.location.search.substring(1).split('&amp;');
                             for (var i in x) {
                                 var z = x[i].split('=', 2);
                                 vars[z[0]] = unescape(z[1]);
                             }
                             var x=['frompage', 'topage', 'page', 'webpage', 'section', 'subsection', 'subsubsection'];
                             for (var i in x) {
                                 var y = document.getElementsByClassName(x[i]);
                                 for (var j=0; j&lt;y.length; ++j)
                                     y[j].textContent = vars[x[i]];
                             }
                             var operations = {
                    'last-page': function (elt) { elt.style.visibility = (vars.page === vars.topage) ? "visible" : "hidden"; },
                };

                             for (var klass in operations) {
                                 var y = document.getElementsByClassName(klass);
                                 for (var j=0; j&lt;y.length; ++j)
                                 operations[klass](y[j]);
                             }
                        }
                    </script>
                          </t>
                      </head>
                      <body class="container" onload="subst()">
                          <t t-raw="body"/>
                      </body>
                  </html>
            </template>


      <!-- Reports Template  -->
  		<template id="stspl_tax_invoice_template">
        <style type="text/css"> 
            td.line , span.line ,th.line {
                font-family:times new roman;
            }
        </style>
        <t t-call="report.html_container">
          <t t-call="stspl_account.external_layout_stspl_tax_invoice">
            <div class="page">
              <div class="oe_structure" />
              <div class="row">
             		<div class="col-xs-6">
             			<h4><b>TAX INVOICE</b></h4>
             		</div>
             		<div class="col-xs-6 text-right">
             			<div>
             				<span>INV No.</span>
             				<strong><span style="padding:49px" t-field="o.number"/></strong>
             			</div>
             			<div style="font-size:11px">
             				<span>Date</span><span style="padding:58px" t-field="o.date_invoice" t-field-options='{"format": "dd-MM-Y"}' />
             			</div>
                </div>
              </div>

             	<table  width="100%" style="font-size:12px" >
           			<tr>
           				<th width="50%" style="padding:5px">SOLD TO:</th>
           				<th width="55%" style="padding:5px">SHIP TO:</th>
           			</tr>
           			<tr class="table" style="border:0.5px solid" >
           				<td width="55%" style="border-right:0.5px solid;padding:10px">
                    <div t-if="o.partner_id" name="partner_header">
                      <div>
                        <span t-field="o.partner_id.name"/>
                      </div>
                      <div>
                        <!-- <span t-field="o.partner_id.house_no"/>
                        <t t-if="o.partner_id.house_no">,</t> -->
                        <span t-field="o.partner_id.street"/>
                      </div>
                      <div>
                    <!--     <span t-field="o.partner_id.level_no"/>
                        <t t-if="o.partner_id.level_no">,</t> -->
                        <span t-field="o.partner_id.street2"/>
                      </div>
                      <div>
                        <span t-field="o.partner_id.city"/>
                        <t t-if="o.partner_id.city">,</t>
                        <span t-field="o.partner_id.state_id"/>
                      </div>
                      <div>
                        <span t-field="o.partner_id.country_id"/>
                        <t t-if="o.partner_id.country_id">,</t>
                        <span t-field="o.partner_id.zip"/>
                      </div>
                    </div>
                    <br/>
                    <p>ATTN: <span t-field="o.attn_inv"/></p>
           				</td>

           				<td width="55%" style="padding:10px">
                    <div t-if="o.partner_id" name="partner_header">
                      <div>
                        <span>ONSEMI-</span><span style="padding:5px" t-field="o.partner_id.parent_id"/>
                      </div>
                      <div>
                        <span t-field="o.partner_id.name"/>
                      </div>
                      <div>
                        <!-- <span t-field="o.partner_id.house_no"/>
                        <t t-if="o.partner_id.house_no">,</t> -->
                        <span t-field="o.partner_id.street"/>
                      </div>
                      <div>
                        <!-- <span t-field="o.partner_id.level_no"/>
                        <t t-if="o.partner_id.level_no">,</t> -->
                        <span t-field="o.partner_id.street2"/>
                      </div>
                      <div>
                        <span t-field="o.partner_id.city"/>
                        <t t-if="o.partner_id.city">,</t>
                        <span t-field="o.partner_id.state_id"/>
                      </div>
                      <div>
                        <span t-field="o.partner_id.country_id"/>
                        <t t-if="o.partner_id.country_id">,</t>
                        <span t-field="o.partner_id.zip"/>
                      </div>
                    </div>                    
                      <p>ATTN: <span t-field="o.attn_inv"/></p>
           				</td>
           			</tr>
             	</table>
             	<br/>

              <table style="border:0.5px solid;font-size:11px" width="100%">
              	<tr style="border:0.5px solid">
              		<td style="border:0.5px solid;padding:5px"><strong>Customer P/O No.</strong></td>
                  <td style="border:0.5px solid;padding:5px"><strong>Shipment Term</strong></td>
              		<td style="border:0.5px solid;padding:5px"><strong>Payment Term</strong></td>
              		<td style="border:0.5px solid;padding:5px"><strong>Payment Due</strong></td>
              		<td style="border:0.5px solid;padding:5px"><strong>Sales Person</strong></td>
              		<td style="border:0.5px solid;padding:5px"><strong>Currency</strong></td>
                  <td style="border:0.5px solid;padding:5px"><strong>Ship Via</strong></td>
              	</tr>

              	<tr style="border:0.5px solid">
              		<td style="border:0.5px solid;padding:5px"><span t-field="o.customer_po"/></td>
              		<td style="border:0.5px solid;padding:5px"><span t-field="o.payment_term"/></td>
                  <td style="border:0.5px solid;padding:5px"><span t-field="o.payment_term"/></td>
              		<td style="border:0.5px solid;padding:5px"><span t-field="o.date_due"/></td>
              		<td style="border:0.5px solid;padding:5px"><span t-field="o.user_id"/></td>
              		<td style="border:0.5px solid;padding:5px"><span t-field="o.currency_id"/></td>
                  <td style="border:0.5px solid;padding:5px"><span t-field="o.ship_via_id.name"/></td>
              	</tr>
              </table>
              <br/>
              <table class="table table-condensed" style="border-top:0.5px solid;font-size:11px" width="100%">
                <thead>
                 <tr>
                     <th class="text-left line" width="15%">Qty</th>
                     <th class="text-left line" width="15%">Unit</th> 
                     <th class="text-center line" width="25%">Description/Part No</th>
                     <th class="text-center line" width="15%">Unit Price</th>
                     <th class="text-center line" width="15%">Discount(%)</th>
                     <th class="text-center line" width="15%">Amount</th>
                 </tr>
                </thead>
                <tbody>
             			<tr t-foreach="o.invoice_line" t-as="line">
               			<td class="text-left" width="15%">
                      <span t-field="line.quantity" t-field-options='{"widget": "int"}' />
                      <span t-field="line.uos_id.name"/>  
                   	</td>
                    <td >
                      <span t-field="line.product_id.name"/>
                    </td>

                    <td class="text-left line" width="25%">
                        <span t-field="line.name"/>
                    </td>
                    <td class="text-center line" width="15%">
                        <span t-field="line.price_unit"/>
                    </td>
                    <td class="text-center line" width="15%">
                        <span t-field="line.discount"/>
                    </td>
                    <td class="text-center line" width="15%">
                        <span t-field="line.price_subtotal"/>
                    </td>
              		</tr>
                </tbody>
              </table>
         	  </div>
          </t>
        </t>
      </template>
        
      <template id="report_stspl_tax_invoice">
    		<t t-call="report.html_container">
        		<t t-foreach="doc_ids" t-as="doc_id">
            		<t t-raw="translate_doc(doc_id, doc_model, 'partner_id.lang', 'stspl_account.stspl_tax_invoice_template')"/>
        		</t>
    		</t>
		  </template>
    </data>
</openerp>
